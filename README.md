# 关于写博客这件事

## 项目背景
我是一个从2017.6.28开始坚持天天写公众号的人，但是不会公众号那些复杂的排版，我的公众号所有文章也就是一堆文字加几张图，偶尔有小标题1，2，3和字体加粗，相当于一个天天写博客的人吧。

## 写作历史
1. 我从一开始一直都是用一个叫作“简媒”的工具，免费，纯网页版，登录进去，码字再上传本地图片，写好以后这文章可以随意copy到任何自媒体平台的编辑器中(比如公众号的剪辑器界面中)完全不变样。当时不太懂，后来发现这个工具实际上把我所有上传的图片都传到它自己的服务器上了，有一个可以外链的图片地址，写好后的文章被它整成了html格式，所以能copy到任何编辑器中。
2. 用了几年之后这个工具突然发公告说不再提供服务了。我于是开始使用一个叫[易撰](https://zmt.yizhuan5.com/work.html#4-2)的工具，免费，也是纯网页版，工作原理和“简媒”一样，原理依然是它把我所有上传的图片都传到它自己的服务器上，有一个可以外链的图片地址，写好后的文章被它整成了html格式。
3. 找了几个收费的自媒体编辑软件，比如[融媒宝](https://www.17van.com/)，发现它所有的图片都保存在本地，完全没有图床功能。[蚂小二](https://cpc.yixiaoer.cn/)也一样。
4. 2021年8月发生了一些大家都知道的事情，一些发表了很久的文章消失不见了！这时偶然发现我的“易撰”草稿箱里的老文章里的图片集体消失了(准确地说是图片外链失效了)，只有大概最近几天的文章图片还在！文章我自己有多处备份，但是图片我并没有特意备份啊！回头再去看看“简媒”的后台，这个网站居然一直都没倒闭，我的历史文章和草稿箱文章一直都在，但是所有图片也无法显示了。再看公众号，草稿箱也升级了，已发布记录都在，但是公众号的所有图片都带有水印而且根本无法外链！这下我彻底慌了！
5. 慌了一阵子才想起来我其实也是一个码农，这点事应该用码农的方式来解决！


### 一、需要一个图床放图片
要求：大厂出品，尽可能活得长，国内能顺畅访问，图片支持外链，不限速不限流，最好免费（我不怕收费但是我这个人很可能会忘记每年继费）
考察了一圈选择了码农才会选的gitee。有pages服务。缺陷：图片不能大于1M。
后来又找了coding。图片似乎没有大小限制。缺陷：pages服务有可能需要收费，域名很难搞。
1. 软件picgo,安装github plus插件以后可以上传图片到gitee了。
   缺点：可以配置快捷键使用剪切板上传功能，但是这样上传的图片是png格式而且远远比原文件大。研究了一下这个比较适合屏幕截图并使用剪切板上传，本地已存在的图片不要使用剪切板。
   解决方式：everything 1.5a过滤出图片，然后右键用xnview重整尺寸，搞到1M以下。小部分使用一款“图压”软件或者TinyPNG网站搞到1M以下。有些gif文件很难压缩，手工选择上传到coding图床。因为需要用到picgo的“上传时按日期重命名”功能，暂定gitee为主，使用git同步到coding。
2. 关于Gitee限制图片大于1M访问的处理方案
   使用第三方图片压缩工具进行压缩，之后再进行上传。推荐 compressjpeg
   启用Gitee的pages功能(非付费用户上传图片之后需要手动进行pages服务的部署)，需要替换域名为pages的域名。
3. 软件picuploader
   缺陷：需要安装php环境，不是很方便。
4. 网站picx，只支持github图床
   https://picx.xpoet.cn/#/upload
5. 软件repo-image-hosting,支持gitee/github图床
   https://github.com/hezhizheng/repo-image-hosting
6. TyoraUpload
   https://gitee.com/cwayteam/TyporaUpload
   gitee大于1M图片自动转Pages地址并自动部署（需开启Pages功能，每上传一次点一次更新）
   Gitee Pages可以解决超过1M的图片只能在登陆后显示的问题，仓库开启Gitee Pages，你上传的图片可通过Pages的链接查看，并且无1M限制。因此在这里用lt跟gt对上传图片大小做了判断，超过1M返回Pages的地址，并对Pages进行重新部署。
   
  2022.03.25更新：[gitee图床方案失效](https://meta.appinn.net/t/topic/31113)。[转移](https://meta.appinn.net/t/topic/31113/21?u=lousi)到收费的腾讯云对象存储和七牛云。工具用picgo+插件。工具依然不满意，在寻找一个合适的[md编辑器](https://meta.appinn.net/t/topic/30662)。

### 二、需要一个可以实时预览图片的Markdown编辑器

要求：使用方便，能预览，最好能快捷键上传图片到图床。在线版或者软件均可。
1. 软件typora. 非常方便地和picgo集成，慢且卡顿，暂弃。
   可选：mdnice(网页版免费)  MarkText (软件) Md2All(图床只能用七牛云) 作业部落、BlogHelper(软件),sapic(自建图床服务器)
2. wangedit.就是一个js库，有图片上传的接口但是没有现成的集成picgo的代码。
      [在线编辑器](https://www.wangeditor.com/demo/zh-CN/simple-mode.html)

### 三、需要一个尽可能和公众号展示效果相似的博客系统

要求：可分类，可排序，可搜索，最好每篇文章能显示一个缩略图。
1. Hexo 主题选next。据说文章越多这个系统会变慢，暂弃。
2. Hugo 主题选stack,even, loveit
3. jekyll
4. Docsify 没搞明白如何根据网盘文件生成sidebar,暂弃
5. Nextra 一键部署到[vercel](https://nextjs-two-sage-90.vercel.app/)上
6. OneManager 集成网盘OneDrive,一键部署到[Vercel](https://39h02cf8e4sr7.cfc-execute.su.baidubce.com/)

### 四、备选方案：Discourse论坛变为博客

